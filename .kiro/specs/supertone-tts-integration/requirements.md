# μ”κµ¬μ‚¬ν•­ λ¬Έμ„

## κ°μ”

μ΄ κΈ°λ¥μ€ κΈ°μ΅΄ TTS μ„λΉ„μ¤μ— Supertone TTS APIλ¥Ό ν†µν•©ν•μ—¬ κ³ ν’μ§μ ν•κµ­μ–΄, μμ–΄, μΌλ³Έμ–΄ ν…μ¤νΈ μμ„± λ³€ν™ κΈ°λ¥μ„ λ‹¤μ–‘ν• μμ„± μ¤νƒ€μΌκ³Ό κ°μ • ν‘ν„κ³Ό ν•¨κ» μ κ³µν•©λ‹λ‹¤. Supertoneμ€ λ‹¤μ–‘ν• κ°μ • μ¤νƒ€μΌκ³Ό μμ„± νΉμ„±μ„ ν¬ν•¨ν• κ΄‘λ²”μ„ν• μ»¤μ¤ν„°λ§μ΄μ§• μµμ…μ„ ν†µν•΄ ν”„λ¦¬λ―Έμ—„ μμ„± ν’μ§μ„ μ κ³µν•©λ‹λ‹¤.

## μ”κµ¬μ‚¬ν•­

### μ”κµ¬μ‚¬ν•­ 1

**μ‚¬μ©μ μ¤ν† λ¦¬:** κ°λ°μλ΅μ„, κΈ°μ΅΄ TTS μ„λΉ„μ¤μ— Supertone TTS APIλ¥Ό ν†µν•©ν•μ—¬ κ°μ • ν‘ν„μ΄ κ°€λ¥ν• κ³ ν’μ§ λ‹¤κµ­μ–΄ ν…μ¤νΈ μμ„± λ³€ν™μ„ μ κ³µν•κ³  μ‹¶μµλ‹λ‹¤.

#### μλ½ κΈ°μ¤€

1. WHEN μ‹μ¤ν…μ΄ Supertone TTS μ”μ²­μ„ λ°›μΌλ©΄ THEN ν…μ¤νΈ μμ„± λ³€ν™ μƒμ„±μ„ μ„ν•΄ Supertone API μ—”λ“ν¬μΈνΈλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤
2. WHEN μ‹μ¤ν…μ΄ Supertone μ”μ²­μ„ μ²λ¦¬ν•λ©΄ THEN ν•κµ­μ–΄, μμ–΄, μΌλ³Έμ–΄λ¥Ό μ§€μ›ν•΄μ•Ό ν•©λ‹λ‹¤
3. WHEN μ‹μ¤ν…μ΄ Supertone API νΈμ¶μ„ ν•λ©΄ THEN API ν‚¤λ¥Ό μ‚¬μ©ν• μΈμ¦μ„ μ²λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤
4. WHEN Supertone APIκ°€ μ¤λ””μ¤ λ°μ΄ν„°λ¥Ό λ°ν™ν•λ©΄ THEN μ‹μ¤ν…μ€ μ μ ν• μ¤λ””μ¤ ν•μ‹μΌλ΅ λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤

### μ”κµ¬μ‚¬ν•­ 2

**μ‚¬μ©μ μ¤ν† λ¦¬:** κ°λ°μλ΅μ„, Supertone API ν‚¤λ¥Ό μ κ³µν•κ³  μμ„± μµμ…μ„ μ§€μ •ν•μ—¬ λ‚΄ κ³„μ •μ„ μ‚¬μ©ν•κ³  μμ„± νΉμ„±μ„ μ»¤μ¤ν„°λ§μ΄μ§•ν•κ³  μ‹¶μµλ‹λ‹¤.

#### μλ½ κΈ°μ¤€

1. WHEN Supertone TTS μ”μ²­μ΄ λ§λ“¤μ–΄μ§€λ©΄ THEN μ‹μ¤ν…μ€ μ ν¨ν• API ν‚¤λ¥Ό μ”κµ¬ν•΄μ•Ό ν•©λ‹λ‹¤
2. WHEN μλ»λ API ν‚¤κ°€ μ κ³µλλ©΄ THEN μ‹μ¤ν…μ€ 401 μΈμ¦ μ¤λ¥λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤
3. WHEN API ν‚¤κ°€ λ„λ½λλ©΄ THEN μ‹μ¤ν…μ€ 400 μλ»λ μ”μ²­ μ¤λ¥λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤
4. WHEN API ν‚¤ κ²€μ¦μ΄ μ‹¤ν¨ν•λ©΄ THEN μ‹μ¤ν…μ€ λ…ν™•ν• μ¤λ¥ λ©”μ‹μ§€λ¥Ό μ κ³µν•΄μ•Ό ν•©λ‹λ‹¤

### μ”κµ¬μ‚¬ν•­ 3

**μ‚¬μ©μ μ¤ν† λ¦¬:** κ°λ°μλ΅μ„, μ‚¬μ© μ‚¬λ΅€μ— κ°€μ¥ μ ν•©ν• μμ„±μ„ μ„ νƒν•  μ μλ„λ΅ νΉμ„±κ³Ό ν•¨κ» μ‚¬μ© κ°€λ¥ν• Supertone μμ„±μ„ μ„ νƒν•κ³  μ‹¶μµλ‹λ‹¤.

#### μλ½ κΈ°μ¤€

1. WHEN μ‚¬μ© κ°€λ¥ν• μμ„±μ„ μ”μ²­ν•λ©΄ THEN μ‹μ¤ν…μ€ voice_id, name, age, gender, use_case μ •λ³΄μ™€ ν•¨κ» μμ„±μ„ λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤
2. WHEN μ‚¬μ© κ°€λ¥ν• μμ„±μ„ μ”μ²­ν•λ©΄ THEN μ‹μ¤ν…μ€ κ° μμ„±μ— λ€ν•΄ μ§€μ›λλ” μ–Έμ–΄(ko, en, ja)λ¥Ό ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤
3. WHEN μ‚¬μ© κ°€λ¥ν• μμ„±μ„ μ”μ²­ν•λ©΄ THEN μ‹μ¤ν…μ€ κ° μμ„±μ— λ€ν•΄ μ‚¬μ© κ°€λ¥ν• μ¤νƒ€μΌμ„ ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤
4. WHEN μμ„±μ΄ μ—¬λ¬ μ¤νƒ€μΌμ„ μ§€μ›ν•λ©΄ THEN μ‹μ¤ν…μ€ λ¨λ“  μ‚¬μ© κ°€λ¥ν• κ°μ • μ¤νƒ€μΌ(neutral, happy, sad, angry λ“±)μ„ λ‚μ—΄ν•΄μ•Ό ν•©λ‹λ‹¤

### μ”κµ¬μ‚¬ν•­ 4

**μ‚¬μ©μ μ¤ν† λ¦¬:** κ°λ°μλ΅μ„, μ μ ν• ν†¤κ³Ό κ°μ •μΌλ΅ μμ„±μ„ μƒμ„±ν•  μ μλ„λ΅ μμ„± μ¤νƒ€μΌκ³Ό κ°μ • ν‘ν„μ„ μ§€μ •ν•κ³  μ‹¶μµλ‹λ‹¤.

#### μλ½ κΈ°μ¤€

1. WHEN TTS μ”μ²­μ„ ν•λ©΄ THEN μ‹μ¤ν…μ€ κ°μ • ν‘ν„μ„ μ„ν• style νλΌλ―Έν„°λ¥Ό λ°›μ•„μ•Ό ν•©λ‹λ‹¤
2. WHEN μ¤νƒ€μΌμ΄ μ§€μ •λλ©΄ THEN μ‹μ¤ν…μ€ μ„ νƒλ μμ„±μ μ‚¬μ© κ°€λ¥ν• μ¤νƒ€μΌμ— λ€ν•΄ κ²€μ¦ν•΄μ•Ό ν•©λ‹λ‹¤
3. WHEN μλ»λ μ¤νƒ€μΌμ΄ μ κ³µλλ©΄ THEN μ‹μ¤ν…μ€ μ‚¬μ© κ°€λ¥ν• μ¤νƒ€μΌκ³Ό ν•¨κ» 400 μ¤λ¥λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤
4. WHEN μ¤νƒ€μΌμ΄ μ§€μ •λμ§€ μ•μΌλ©΄ THEN μ‹μ¤ν…μ€ "neutral" μ¤νƒ€μΌμ„ κΈ°λ³Έκ°’μΌλ΅ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤

### μ”κµ¬μ‚¬ν•­ 5

**μ‚¬μ©μ μ¤ν† λ¦¬:** κ°λ°μλ΅μ„, μμ„± ν’μ§κ³Ό νΉμ„±μ„ μ μ–΄ν•  μ μλ„λ΅ Supertone μμ„± νλΌλ―Έν„°λ¥Ό μ»¤μ¤ν„°λ§μ΄μ§•ν•κ³  μ‹¶μµλ‹λ‹¤.

#### μλ½ κΈ°μ¤€

1. WHEN TTS μ”μ²­μ„ ν•λ©΄ THEN μ‹μ¤ν…μ€ μμ„± μ†λ„ μ μ–΄λ¥Ό μ„ν• speed νλΌλ―Έν„°λ¥Ό μ§€μ›ν•΄μ•Ό ν•©λ‹λ‹¤
2. WHEN TTS μ”μ²­μ„ ν•λ©΄ THEN μ‹μ¤ν…μ€ μμ„± ν”ΌμΉ μ΅°μ •μ„ μ„ν• pitch νλΌλ―Έν„°λ¥Ό μ§€μ›ν•΄μ•Ό ν•©λ‹λ‹¤
3. WHEN TTS μ”μ²­μ„ ν•λ©΄ THEN μ‹μ¤ν…μ€ μ¤λ””μ¤ λ³Όλ¥¨ μ μ–΄λ¥Ό μ„ν• volume νλΌλ―Έν„°λ¥Ό μ§€μ›ν•΄μ•Ό ν•©λ‹λ‹¤
4. WHEN μλ»λ νλΌλ―Έν„°κ°€ μ κ³µλλ©΄ THEN μ‹μ¤ν…μ€ ν—μ© κ°€λ¥ν• λ²”μ„μ™€ ν•¨κ» κ²€μ¦ μ¤λ¥λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤

### μ”κµ¬μ‚¬ν•­ 6

**μ‚¬μ©μ μ¤ν† λ¦¬:** κ°λ°μλ΅μ„, μ‚¬μ©μμ—κ² μλ―Έ μλ” ν”Όλ“λ°±μ„ μ κ³µν•  μ μλ„λ΅ Supertone API μ¤λ¥λ¥Ό μ°μ•„ν•κ² μ²λ¦¬ν•κ³  μ‹¶μµλ‹λ‹¤.

#### μλ½ κΈ°μ¤€

1. WHEN Supertone APIκ°€ μ¤λ¥λ¥Ό λ°ν™ν•λ©΄ THEN μ‹μ¤ν…μ€ μ μ ν• HTTP μƒνƒ μ½”λ“λ΅ λ§¤ν•‘ν•΄μ•Ό ν•©λ‹λ‹¤
2. WHEN μ†λ„ μ ν•μ΄ μ΄κ³Όλλ©΄ THEN μ‹μ¤ν…μ€ μ¬μ‹λ„ μ •λ³΄μ™€ ν•¨κ» 429 μ¤λ¥λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤
3. WHEN μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•  μ μ—†μΌλ©΄ THEN μ‹μ¤ν…μ€ 503 μ¤λ¥λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤
4. WHEN μμ„±μ΄λ‚ μ¤νƒ€μΌμ„ μ°Ύμ„ μ μ—†μΌλ©΄ THEN μ‹μ¤ν…μ€ μ‚¬μ© κ°€λ¥ν• μµμ…κ³Ό ν•¨κ» 404 μ¤λ¥λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤

### μ”κµ¬μ‚¬ν•­ 7

**μ‚¬μ©μ μ¤ν† λ¦¬:** κ°λ°μλ΅μ„, μ „μ²΄ μ½ν…μΈ λ¥Ό μƒμ„±ν•κΈ° μ „μ— λ‹¤μ–‘ν• μμ„±κ³Ό μ¤νƒ€μΌμ„ ν…μ¤νΈν•  μ μλ„λ΅ μμ„± μƒν”μ„ λ―Έλ¦¬ λ“¤μ–΄λ³΄κ³  μ‹¶μµλ‹λ‹¤.

#### μλ½ κΈ°μ¤€

1. WHEN μμ„± λ―Έλ¦¬λ³΄κΈ°λ¥Ό μ”μ²­ν•λ©΄ THEN μ‹μ¤ν…μ€ μ§€μ •λ μμ„±κ³Ό μ¤νƒ€μΌμ„ μ‚¬μ©ν•μ—¬ μ§§μ€ μƒν”μ„ μƒμ„±ν•΄μ•Ό ν•©λ‹λ‹¤
2. WHEN μμ„± λ―Έλ¦¬λ³΄κΈ°λ¥Ό μ”μ²­ν•λ©΄ THEN μ‹μ¤ν…μ€ μ–Έμ–΄μ— μ ν•©ν• μƒν” ν…μ¤νΈλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤
3. WHEN μμ„± λ―Έλ¦¬λ³΄κΈ°λ¥Ό μ”μ²­ν•λ©΄ THEN μ‹μ¤ν…μ€ μΌλ° TTSμ™€ λ™μΌν• ν•μ‹μΌλ΅ μ¤λ””μ¤ λ°μ΄ν„°λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤
4. WHEN λ―Έλ¦¬λ³΄κΈ° μƒμ„±μ΄ μ‹¤ν¨ν•λ©΄ THEN μ‹μ¤ν…μ€ μ μ ν• μ¤λ¥ λ©”μ‹μ§€λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤

### μ”κµ¬μ‚¬ν•­ 8

**μ‚¬μ©μ μ¤ν† λ¦¬:** κ°λ°μλ΅μ„, κΈ°μ΅΄ μ‹μ¤ν… λ‚΄μ—μ„ μΌκ΄€λκ² μ‚¬μ©ν•  μ μλ„λ΅ Supertone ν†µν•©μ΄ λ‹¤λ¥Έ TTS μ κ³µμ—…μ²΄μ™€ λ™μΌν• μΈν„°νμ΄μ¤λ¥Ό λ”°λ¥΄κΈ°λ¥Ό μ›ν•©λ‹λ‹¤.

#### μλ½ κΈ°μ¤€

1. WHEN Supertoneμ„ ν†µν•©ν•λ©΄ THEN λ‹¤λ¥Έ TTS μ κ³µμ—…μ²΄μ™€ λ™μΌν• μ„λΉ„μ¤ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ•Ό ν•©λ‹λ‹¤
2. WHEN TTS μ”μ²­μ„ ν•λ©΄ THEN μ‹μ¤ν…μ€ λ¨λ“  μ κ³µμ—…μ²΄μ—μ„ λ™μΌν• μ‘λ‹µ ν•μ‹μ„ μ§€μ›ν•΄μ•Ό ν•©λ‹λ‹¤
3. WHEN μ¤λ¥λ¥Ό μ²λ¦¬ν•λ©΄ THEN μ‹μ¤ν…μ€ μΌκ΄€λ μ¤λ¥ μ²λ¦¬ ν¨ν„΄μ„ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤
4. WHEN μ¤λ””μ¤ λ°μ΄ν„°λ¥Ό λ°ν™ν•λ©΄ THEN μ‹μ¤ν…μ€ μΌκ΄€λ μ¤λ””μ¤ ν•μ‹ ν‘μ¤€μ„ μ μ§€ν•΄μ•Ό ν•©λ‹λ‹¤

## κµ¬ν„ μƒνƒ

### β… μ™„λ£λ κµ¬ν„

#### 1. API μ—”λ“ν¬μΈνΈ
- **POST `/tts_supertone`**: Supertone TTS ν…μ¤νΈ μμ„± λ³€ν™
- **GET `/voices/supertone`**: μ‚¬μ© κ°€λ¥ν• Supertone μμ„± λ©λ΅ μ΅°ν
- **POST `/voices/supertone/{voice_id}/sample`**: μμ„± μƒν” λ―Έλ¦¬λ³΄κΈ°

#### 2. λ°μ΄ν„° μ¤ν‚¤λ§
- **SupertoneTTSRequest**: TTS μ”μ²­ μ¤ν‚¤λ§ (μµλ€ 300μ μ ν•)
- **SupertoneVoice**: μμ„± μ •λ³΄ μ¤ν‚¤λ§ (νΉμ„±, μ–Έμ–΄, μ¤νƒ€μΌ ν¬ν•¨)

#### 3. μ§€μ› κΈ°λ¥
- **μ–Έμ–΄**: ν•κµ­μ–΄(ko), μμ–΄(en), μΌλ³Έμ–΄(ja)
- **κ°μ • μ¤νƒ€μΌ**: neutral, happy, sad, angry λ“±
- **μμ„± νλΌλ―Έν„°**: 
  - pitch_shift (-12 ~ +12)
  - pitch_variance (0.1 ~ 2.0)  
  - speed (0.5 ~ 2.0)
- **μ¶λ ¥ ν•μ‹**: WAV, MP3

#### 4. μΈμ¦ λ° μ¤λ¥ μ²λ¦¬
- API ν‚¤ κ²€μ¦ (μ”μ²­ λλ” ν™κ²½λ³€μ SUPERTONE_APIKEY)
- μ μ ν• HTTP μƒνƒ μ½”λ“ (401, 404, 429, 503 λ“±)
- μƒμ„Έν• μ¤λ¥ λ©”μ‹μ§€μ™€ λ΅κΉ…

#### 5. κΈ°μ΅΄ μ‹μ¤ν…κ³Όμ ν†µν•©
- λ‹¤λ¥Έ TTS μ κ³µμ—…μ²΄μ™€ λ™μΌν• μ‘λ‹µ ν•μ‹
- λ™μΌν• combine_wav μ—”λ“ν¬μΈνΈ νΈν™μ„±
- μΌκ΄€λ νμΌ μ €μ¥ λ° κ΄€λ¦¬ ν¨ν„΄

### π”§ κΈ°μ μ  μ„Έλ¶€μ‚¬ν•­

#### κµ¬ν„ νμΌ
- `supertone_service.py`: Supertone API μ„λΉ„μ¤ κ³„μΈµ
- `schemas.py`: Pydantic λ°μ΄ν„° λ¨λΈ (SupertoneTTSRequest, SupertoneVoice)  
- `tts_api.py`: FastAPI μ—”λ“ν¬μΈνΈ μ¶”κ°€

#### ν™κ²½ λ³€μ
```bash
SUPERTONE_APIKEY=your_supertone_api_key_here
```

#### μ‚¬μ© μμ‹
```json
POST /tts_supertone
{
  "segments": [{"id": 1, "text": "μ•λ…•ν•μ„Έμ”, μνΌν†¤μ…λ‹λ‹¤."}],
  "tempdir": "temp_001",
  "voice_id": "sona_korean_female",
  "language": "ko",
  "style": "happy",
  "speed": 1.2,
  "pitch_shift": 2.0
}
```

### π“‹ μ”κµ¬μ‚¬ν•­ μ¶©μ΅± ν™•μΈ

- [x] **μ”κµ¬μ‚¬ν•­ 1**: Supertone API μ—”λ“ν¬μΈνΈ μ‚¬μ©, λ‹¤κµ­μ–΄ μ§€μ›, API ν‚¤ μΈμ¦, μ μ ν• μ¤λ””μ¤ ν•μ‹ λ°ν™
- [x] **μ”κµ¬μ‚¬ν•­ 2**: API ν‚¤ κ²€μ¦, 401/400 μ¤λ¥ μ²λ¦¬, λ…ν™•ν• μ¤λ¥ λ©”μ‹μ§€
- [x] **μ”κµ¬μ‚¬ν•­ 3**: μμ„± νΉμ„± μ •λ³΄ μ κ³µ (voice_id, name, age, gender, use_case, μ§€μ› μ–Έμ–΄, μ¤νƒ€μΌ)
- [x] **μ”κµ¬μ‚¬ν•­ 4**: μ¤νƒ€μΌ νλΌλ―Έν„° μ§€μ›, κ²€μ¦, κΈ°λ³Έκ°’ neutral, 400 μ¤λ¥ μ²λ¦¬
- [x] **μ”κµ¬μ‚¬ν•­ 5**: speed, pitch_shift, pitch_variance νλΌλ―Έν„° μ§€μ›, λ²”μ„ κ²€μ¦
- [x] **μ”κµ¬μ‚¬ν•­ 6**: HTTP μƒνƒ μ½”λ“ λ§¤ν•‘, 429/503/404 μ¤λ¥ μ²λ¦¬
- [x] **μ”κµ¬μ‚¬ν•­ 7**: μμ„± λ―Έλ¦¬λ³΄κΈ° κΈ°λ¥, μ–Έμ–΄λ³„ μƒν” ν…μ¤νΈ, λ™μΌν• μ¤λ””μ¤ ν•μ‹
- [x] **μ”κµ¬μ‚¬ν•­ 8**: κΈ°μ΅΄ TTS μ κ³µμ—…μ²΄μ™€ λ™μΌν• μΈν„°νμ΄μ¤, μ‘λ‹µ ν•μ‹, μ¤λ¥ μ²λ¦¬ ν¨ν„΄